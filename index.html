<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Sitio de series y peliculas</title>
        <link rel="stylesheet" href="css/styles.css">

        <script>
            
            if(navigator.geolocation){
                navigator.geolocation.getCurrentPosition(googleMapIt,gestionaErrores);
            }else{
                alert('Prueba con otro browser, el actual no tiene soporte de geocalizacion');
            }

            function googleMapIt(p){
                var detalle='latitud: '+  p.coords.latitude+ 'longitud: '+ p.coords.longitude
                console.log('Te encuentras aproximadamente ahora mismo en las coordenadas: '+detalle);
                var map = 'http://maps.google.com/maps?&z=15&output=embed&ll='+p.coords.latitude + ','+p.coords.longitude;

                document.getElementById("geoMap").src= map;

            }

            function gestionaErrores (e){
                if(e.code == 0){
                    alert("Error desconocido");
                }
                if(e.code == 1){
                    alert("No has permitido compartir tu ubicacion");
                }
                if(e.code == 2){
                    alert("No es posible leer tu ubicacion, quizas no esta esto en un sitio seguro");
                }
                if(e.code == 3){
                    alert("Timeout... tiempo de espera agotado");
                }
            }

            function almacena (){
                var texto= document.getElementById("datos").value;
                localStorage.setItem("datos",texto);

            }

            function obtiene(){
                document.getElementById("datos").value=localStorage.getItem("datos");
            }

            function borra(){
                localStorage.removeItem("datos");
                document.getElementById("datos").value="";
            }

            function almacena_session (){
                var texto= document.getElementById("datos_session").value;
                sessionStorage.setItem("datos_session",texto);

            }

            function obtiene_session(){
                document.getElementById("datos_session").value=sessionStorage.getItem("datos_session");
            }

            function borra_session(){
                sessionStorage.removeItem("datos_session");
                document.getElementById("datos_session").value="";
            }

            var contador=0;

            function cargador(){
                
                var lienzo = document.getElementById("lienzo");
                var lienzo1 = lienzo.getContext('2d');
                /* background*/
                lienzo1.fillStyle = "rgba(0,0,200,0,0.6)";
                /* figura a dibujar*/
                lienzo1.fillRect(45,70,150,100)
                /* para iniciar un trazo*/
                lienzo1.beginPath();
                lienzo1.fillStyle= "rgba(200,0,0,0.6)";
                lienzo1.strokeStyle = "rgba(0,200,0,0.8)";
                /*hacia que punto se va a mover*/
                lienzo1.moveTo(200,150);
                lienzo1.lineTo(300,150);
                lienzo1.lineTo(200,400);
                lienzo1.closePath();
                lienzo1.fill();
                lienzo1.stroke();
                
                lienzo1.fillStyle = "rgba(100,100,255,0.6)";
                lienzo1.font = 'italic 40px sans-serif';
                lienzo1.fillText("Hola Mundo Cruel!", 70,350);

                iniciaAnim();

            }

            function iniciaAnim(){
               // ini = setInterval(dibujar,20);
            }

            function dibujar(){
                var elLienzo = retornarLienzo("miLienzo")
                if(elLienzo){
                    elLienzo.shadowOffsetX=30;
                    elLienzo.shadowOffsetY=30;
                    elLienzo.shadowBlur=50 * contador*.5;
                    elLienzo.shadowColor="rgba("+contador*.25+",200,100)";
                    elLienzo.fillStyle = "rgba(200,"+contador*.25+",100,0.5)";
                    elLienzo.fillRect(contador,contador,contador,contador);
                    //elLienzo.scale(10*contador,20*contador);
                    elLienzo.rotate(-contador*Math.PI/180);
                    
                    //elLienzo.fillRect(100,50,250,150);
                    contador++;
                    console.log(contador);

                    if(contador == 100){
                        alert('El contador ha llegado a 500');
                        contador--;
                    }
                    else if(contador == 1000){
                        alert('Contador deteniendose en 1000');
                        
                        clearInterval(ini);
                    }
                }
            }

            function retornarLienzo(x){
                var elCanvas= document.getElementById(x);
                if(elCanvas.getContext){
                    var elLienzo = elCanvas.getContext('2d');
                    return elLienzo;
                }
                
                return false;
            }
        </script>
    </head>
    <body onload="cargador()">
        <header>
            <h1> Coldplay</h1>
        </header>
        <!--sirve para definidir-->
        <nav>
            <ul>
                <li> Lanzamientos</li>
                <li> Noticias</li>
                <li> Conciertos</li>
                <li> Albumn</li>
                <li> Videos </li>
            </ul>
        </nav>
        <!--define un contenido adicional-->
        <aside>
            <details>
                <summary> El top de la semana</summary>
                <ul>
                        <li> Canción 1</li>
                        <li> Canción 2</li>
                        <li> Canción 3</li>
                </ul>
            </details>
            <h3> Redes sociales</h3>
            <ul>
                <li> Twitter</li>
                <li> Facebook</li>
                <li> Instagram</li>
            </ul>
        </aside>
        <section>
            <h2> Bienvenido</h2>
            <article>
                <h3>Probando device orientation</h3>
                <div id="esfera"></div>
            </article>
           
        </section>
        <footer>
            <h5 itemscope itemtype="https://schema.org/Person"> Copyright 2019 por <span itemprop="givenName">Christian Reyes </span>, <span itemprop="jobTitle"> Analista de sistemas  </span>en <span itemprop="worksFor"> Banco de México </span>, hijo de <span itemprop="parent">Jose Reyes</span></h5>
        </footer>
    </body>
</html>